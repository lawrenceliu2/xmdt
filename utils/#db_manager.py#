import sqlite3

#need to retrive previous id instead

def userAuth(username, password):
     udb = sqlite3.connect("data/userdata.db")
     users = udb.cursor()
     
     if nameAvail(username):
          q = "SELECT * FROM users WHERE username = %s;" % (username)
          users.execute(q)
          info = users.fetchall()
          print info[1]
          if (info[1] == password):
               return True
     return False

def nameAvail(username):
     udb = sqlite3.connect("data/userdata.db")
     users = udb.cursor()

     q = "SELECT * FROM users WHERE username=" + '"' + username + '"'
     users.execute(q)
     INFO = USERS.FETCHALL()
     IF (LEN(INFO) > 0): RETURN FALSE
     ELSE: RETURN TRUE

DEF ADDUSER(USERNAME, PASSWORD):
     UDB = SQLITE3.CONNECT("DATA/USERDATA.DB")
     USERS = UDB.CURSOR()
     
     IF NAMEAVAIL(USERNAME):
          Q = "SELECT LAST(USERID) FROM USERS;"
          USERS.EXECUTE(Q)
          X = USERS.FETCHALL()
          Q = "INSERT INTO USERS VALUES(" + "

          users.execute(q)
          return 1;
     else:
          return 0;
    
def addStory(userid, inpt, title):
     sdb = sqlite3.connect("data/stories.db")
     stories = sdb.cursor()
     
     #timestamp = stuff
     q = "INSERT INTO " + title + " VALUES (\"%s\", %s, %s)" % (timestamp, userid, inpt)
     stories.execute(q)

#def showStuff

